# define COLOR(a) sin(a + 1) * 127 + 128

r = (int)(COLOR(fmod((double)f->ps_time * t * 0.99, 2 * PI)));
        g = (int)(COLOR(fmod((double)f->ps_time * t * 0.66, 2 * PI)));
        b = (int)(COLOR(fmod((double)f->ps_time * t * 0.33, 2 * PI)));


        http://grafika.me/node/199